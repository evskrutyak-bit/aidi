<!-- Chosen Palette: Organic Earth (Warm Neutrals, Olive Green, Deep Nut Brown, Soft Cream) -->
<!-- Application Structure Plan:
    The application is designed as a "Research Strategy Dashboard" or "Command Center" for the researcher.
    Since the source text is a *brief* and not the results, the structure focuses on visualizing the *requirements* and the *plan*.
    1. **Mission Control (Dashboard):** High-level view of the client's current state vs. goals (Revenue Gap) and the research scope (Quality Gates).
    2. **Business Context:** Interactive inventory of the client's current vs. planned product line and business constraints.
    3. **The Battlefield (Segments):** Interactive cards detailing the 5 defined competitive segments (R1).
    4. **The Protocol (Methodology):** A step-by-step interactive guide through the research stages (R2-R9), explaining what data needs to be collected.
    5. **Quality Gates:** Visual targets for the research output (e.g., min 20 competitors).
    
    Why this structure? It translates a linear text brief into an operational tool. It helps the researcher or stakeholder visualize the *scope* of work and the definitions of success immediately.
-->
<!-- Visualization & Content Choices:
    1. **Revenue Gap Chart (Chart.js):** Visualizes the 100k -> 500k goal to set the context for *why* the research is happening.
       - *Interaction:* None (Static Goal), but visually striking.
    2. **Product Portfolio (Interactive Grid):** Displays Current vs. Planned oils.
       - *Interaction:* Filter buttons (Show All, Current, Planned). Visual distinction (Solid vs. Dashed border).
    3. **Segmentation Cards (Flexbox):** Presents the competitive field.
       - *Interaction:* Hover/Click to reveal detailed criteria for each segment.
    4. **Methodology Stepper (JS + DOM):** Breaks down R1-R9 into digestible chunks.
       - *Interaction:* Accordion expansion to see specific data points required for each step.
    5. **Quality Gates Gauge (Chart.js):** Doughnut charts showing "Target" numbers (e.g., 20 Competitors) to gamify the requirements.
    
    *Confirmation:* NO SVG used. NO Mermaid JS used. All icons are unicode or CSS shapes. Charts are Canvas.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¶–µ–Ω—Ç—Ä –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º: –ú–∞—Å–ª–∞ –•–æ–ª–æ–¥–Ω–æ–≥–æ –û—Ç–∂–∏–º–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@600;700&display=swap');

        :root {
            --color-bg: #F9F8F4; /* Soft Cream */
            --color-card: #FFFFFF;
            --color-text: #2D2A26; /* Deep Brown/Black */
            --color-accent: #556B2F; /* Dark Olive Green */
            --color-accent-light: #8F9779;
            --color-highlight: #D2B48C; /* Tan */
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Inter', sans-serif;
        }

        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }

        /* Chart Container Styling - Mandatory per instructions */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for inner content */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .tab-active {
            background-color: var(--color-accent);
            color: white;
            border-left: 4px solid var(--color-highlight);
        }

        .tab-inactive:hover {
            background-color: #e5e7eb;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 p-4 shadow-sm z-10">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div>
                <div class="text-xs font-bold text-[#556B2F] uppercase tracking-widest">Research Scope & Strategy</div>
                <h1 class="text-2xl font-bold text-gray-900">–ù–∏—à–∞: –ú–∞—Å–ª–∞ –•–æ–ª–æ–¥–Ω–æ–≥–æ –û—Ç–∂–∏–º–∞</h1>
            </div>
            <div class="hidden md:block text-right">
                <div class="text-sm text-gray-500">–ö–ª–∏–µ–Ω—Ç / –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä</div>
                <div class="font-semibold">–ò–ü –ë—Ä–æ–¥—Å–∫–∏–π –ö–∏—Ä–∏–ª–ª –õ—å–≤–æ–≤–∏—á</div>
            </div>
        </div>
    </header>

    <!-- Main Content Layout -->
    <div class="flex-1 flex overflow-hidden">
        
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white border-r border-gray-200 overflow-y-auto hidden md:block">
            <nav class="p-4 space-y-2">
                <button onclick="switchTab('dashboard')" id="nav-dashboard" class="w-full text-left px-4 py-3 rounded-md transition-colors tab-active flex items-center gap-3">
                    <span class="text-xl">üìä</span>
                    <span class="font-medium">–î–∞—à–±–æ—Ä–¥ –¶–µ–ª–µ–π</span>
                </button>
                <button onclick="switchTab('context')" id="nav-context" class="w-full text-left px-4 py-3 rounded-md transition-colors tab-inactive flex items-center gap-3">
                    <span class="text-xl">üè¢</span>
                    <span class="font-medium">–ö–æ–Ω—Ç–µ–∫—Å—Ç –ë–∏–∑–Ω–µ—Å–∞</span>
                </button>
                <button onclick="switchTab('segments')" id="nav-segments" class="w-full text-left px-4 py-3 rounded-md transition-colors tab-inactive flex items-center gap-3">
                    <span class="text-xl">üéØ</span>
                    <span class="font-medium">–°–µ–≥–º–µ–Ω—Ç—ã –†—ã–Ω–∫–∞</span>
                </button>
                <button onclick="switchTab('protocol')" id="nav-protocol" class="w-full text-left px-4 py-3 rounded-md transition-colors tab-inactive flex items-center gap-3">
                    <span class="text-xl">üìã</span>
                    <span class="font-medium">–ü—Ä–æ—Ç–æ–∫–æ–ª R1-R9</span>
                </button>
            </nav>
            
            <div class="p-4 mt-8 border-t border-gray-100">
                <div class="text-xs text-gray-400 uppercase font-semibold mb-2">–°—Ç–∞—Ç—É—Å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</div>
                <div class="flex items-center gap-2 text-yellow-600 bg-yellow-50 p-2 rounded text-sm">
                    <span class="animate-pulse">‚óè</span> –í –æ–∂–∏–¥–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
                </div>
            </div>
        </aside>

        <!-- Mobile Nav Toggle (Visible only on mobile) -->
        <div class="md:hidden fixed bottom-4 right-4 z-50">
            <button onclick="toggleMobileNav()" class="bg-[#556B2F] text-white p-4 rounded-full shadow-lg">
                ‚ò∞ –ú–µ–Ω—é
            </button>
        </div>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto custom-scroll bg-[#F9F8F4] p-4 md:p-8" id="main-content">
            <!-- Content will be injected here via JS -->
        </main>
    </div>

    <!-- Javascript Logic -->
    <script>
        // --- DATA STORE ---
        const appData = {
            businessContext: {
                revenue: {
                    current: 110000,
                    targetMin: 300000,
                    targetMax: 500000
                },
                products: {
                    current: ["–ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ", "–ì—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö", "–ö–µ–¥—Ä–æ–≤–æ–µ", "–õ—å–Ω—è–Ω–æ–µ", "–ü–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ", "–†–∞—Å—Ç–æ—Ä–æ–ø—à–∞", "–ß—ë—Ä–Ω—ã–π —Ç–º–∏–Ω", "–¢—ã–∫–≤–µ–Ω–Ω–æ–µ"],
                    planned: ["–û–±–ª–µ–ø–∏—Ö–∞", "–ö–æ–Ω–æ–ø–ª—è–Ω–æ–µ", "–ö—É–Ω–∂—É—Ç–Ω–æ–µ", "–ö–æ–∫–æ—Å–æ–≤–æ–µ"]
                },
                channels: {
                    offline: "–¢–æ—á–∫–∞ –ú–æ—Å–∫–≤–∞, —Ä—ã–Ω–æ–∫ ¬´–î–æ—Ä–æ–≥–æ–º–∏–ª–æ–≤—Å–∫–∏–π¬ª",
                    online: "–¶–µ–ª—å –≤—ã—Ö–æ–¥–∞ (—Å–µ–π—á–∞—Å –Ω–µ—Ç —Å–æ—Ü—Å–µ—Ç–µ–π)"
                }
            },
            segments: [
                {
                    id: 1,
                    title: "–ü—Ä—è–º—ã–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã",
                    criteria: "–û—á–µ–Ω—å –±–ª–∏–∑–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (D2C, –∫—Ä–∞—Ñ—Ç).",
                    focus: "–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ—Å—Ç—å, —Å–≤–µ–∂–µ—Å—Ç—å."
                },
                {
                    id: 2,
                    title: "–°–º–µ–∂–Ω—ã–µ / –ö–æ—Å–≤–µ–Ω–Ω—ã–µ",
                    criteria: "–ë–ª–∏–∑–∫–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å, –Ω–æ –∏–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç/–∫–∞–Ω–∞–ª.",
                    focus: "–ú–∞—Å—Å-–º–∞—Ä–∫–µ—Ç —ç–∫–æ, –∞–ø—Ç–µ—á–Ω—ã–µ –º–∞—Å–ª–∞."
                },
                {
                    id: 3,
                    title: "–ó–∞–º–µ–Ω–∏—Ç–µ–ª–∏",
                    criteria: "–ó–∞–∫—Ä—ã–≤–∞—é—Ç –∑–∞–¥–∞—á—É –ó–û–ñ/–ü–æ–ª—å–∑—ã –∏–Ω–∞—á–µ.",
                    focus: "–ë–ê–î—ã (–û–º–µ–≥–∞-3), —Å—É–ø–µ—Ä—Ñ—É–¥—ã."
                },
                {
                    id: 4,
                    title: "–û—Ñ—Ñ–ª–∞–π–Ω-–ª–æ–∫–∞–ª—å–Ω—ã–µ",
                    criteria: "–†—ã–Ω–∫–∏, —è—Ä–º–∞—Ä–∫–∏, —Ñ–µ—Ä–º–µ—Ä—ã –±–µ–∑ —Å–∏–ª—å–Ω–æ–≥–æ –æ–Ω–ª–∞–π–Ω–∞.",
                    focus: "–õ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç, –¥–µ–≥—É—Å—Ç–∞—Ü–∏–∏."
                },
                {
                    id: 5,
                    title: "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å-–±—Ä–µ–Ω–¥—ã",
                    criteria: "–°–¢–ú –∏ –±—Ä–µ–Ω–¥—ã, –∂–∏–≤—É—â–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ WB/Ozon.",
                    focus: "–¶–µ–Ω–∞, –æ—Ç–∑—ã–≤—ã, —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏."
                }
            ],
            protocol: [
                { id: "R1", title: "–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è", desc: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏ —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è 5 —Å–µ–≥–º–µ–Ω—Ç–æ–≤.", status: "To Do" },
                { id: "R2", title: "–ö–∞—Ç–∞–ª–æ–≥ (ID)", desc: "–°–æ–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É 20+ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ —Å –≥–µ–æ –∏ –∫–∞–Ω–∞–ª–∞–º–∏.", status: "To Do" },
                { id: "R3", title: "–ú–∞—Ç—Ä–∏—Ü–∞ –ü—Ä–æ–¥—É–∫—Ç–æ–≤", desc: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ 30+ SKU 1:1 (—Ü–µ–Ω–∞, –æ–±—ä–µ–º, —É–ø–∞–∫–æ–≤–∫–∞).", status: "To Do" },
                { id: "R4", title: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ & –í–æ—Ä–æ–Ω–∫–∏", desc: "15+ —Ä–∞–∑–±–æ—Ä–æ–≤ –º–µ—Ö–∞–Ω–∏–∫ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.", status: "To Do" },
                { id: "R5", title: "–û—Ñ—Ñ–µ—Ä—ã", desc: "25+ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –æ–±–µ—â–∞–Ω–∏–π –∏ –±–æ–ª–µ–π.", status: "To Do" },
                { id: "R6", title: "CX & –°–µ—Ä–≤–∏—Å", desc: "15+ –∫–µ–π—Å–æ–≤: –¥–æ—Å—Ç–∞–≤–∫–∞, —É–ø–∞–∫–æ–≤–∫–∞, –ª–æ—è–ª—å–Ω–æ—Å—Ç—å.", status: "To Do" },
                { id: "R7", title: "–í–∏–∑—É–∞–ª & TOV", desc: "10+ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤.", status: "To Do" },
                { id: "R8", title: "–ò—Å—Ç–æ—á–Ω–∏–∫–∏", desc: "–õ–æ–≥ 25+ –≤–∞–ª–∏–¥–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.", status: "To Do" },
                { id: "R9", title: "–ü—Ä–æ–±–µ–ª—ã", desc: "–§–∏–∫—Å–∞—Ü–∏—è —Ç–æ–≥–æ, —á—Ç–æ –Ω–∞–π—Ç–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å.", status: "To Do" }
            ],
            gates: {
                competitors: 20,
                products: 30,
                marketingCases: 15,
                offers: 25,
                sources: 25
            }
        };

        // --- STATE MANAGEMENT ---
        let currentTab = 'dashboard';

        // --- RENDER FUNCTIONS ---

        function renderDashboard() {
            const content = document.getElementById('main-content');
            
            content.innerHTML = `
                <div class="space-y-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                        <h2 class="text-2xl font-bold mb-2 font-serif text-[#2D2A26]">–¶–µ–ª–∏ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</h2>
                        <p class="text-gray-600 max-w-3xl">
                            –î–∞–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –±—Ä–µ–Ω–¥–∞ –º–∞—Å–µ–ª —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –æ—Ç–∂–∏–º–∞. 
                            –ì–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫—Ä–∞—Ç–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –≤—ã—Ä—É—á–∫–∏ —Å 100 —Ç—ã—Å. –¥–æ 500 —Ç—ã—Å. —Ä—É–±.
                            —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ –≤—ã—Ö–æ–¥ –≤ –æ–Ω–ª–∞–π–Ω.
                        </p>
                    </div>

                    <!-- KPI Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Revenue Goal Chart -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100 flex flex-col items-center">
                            <h3 class="text-lg font-semibold mb-4 text-[#556B2F]">–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –¶–µ–ª—å (‚ÇΩ/–º–µ—Å)</h3>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                            <p class="text-sm text-gray-500 mt-4 text-center">–¶–µ–ª—å: –¢—Ä–µ—Ö–∫—Ä–∞—Ç–Ω—ã–π —Ä–æ—Å—Ç –∑–∞ 12 –º–µ—Å—è—Ü–µ–≤</p>
                        </div>

                        <!-- Quality Gates Visualization -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                            <h3 class="text-lg font-semibold mb-4 text-[#556B2F]">Quality Gates (–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º)</h3>
                            <div class="grid grid-cols-2 gap-4">
                                ${renderGateCard(appData.gates.competitors, "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤")}
                                ${renderGateCard(appData.gates.products, "–û—Ñ—Ñ–µ—Ä–æ–≤/SKU")}
                                ${renderGateCard(appData.gates.marketingCases, "–†–∞–∑–±–æ—Ä–æ–≤ –í–æ—Ä–æ–Ω–æ–∫")}
                                ${renderGateCard(appData.gates.offers, "–¶–∏—Ç–∞—Ç/–û—Ñ—Ñ–µ—Ä–æ–≤")}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize Charts
            setTimeout(() => {
                initRevenueChart();
            }, 0);
        }

        function renderGateCard(target, label) {
            return `
                <div class="bg-[#F9F8F4] p-4 rounded text-center border border-[#E5E7EB]">
                    <div class="text-3xl font-bold text-[#556B2F]">‚â•${target}</div>
                    <div class="text-xs text-gray-500 uppercase tracking-wide mt-1">${label}</div>
                </div>
            `;
        }

        function renderContext() {
            const content = document.getElementById('main-content');
            content.innerHTML = `
                <div class="space-y-8 animate-fade-in">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                        <h2 class="text-2xl font-bold mb-4 font-serif text-[#2D2A26]">–ë–∏–∑–Ω–µ—Å-–ö–æ–Ω—Ç–µ–∫—Å—Ç</h2>
                        <p class="text-gray-600 mb-6">
                            –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –±—Ä–µ–Ω–¥–∞ –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
                        </p>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Current State -->
                            <div>
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                                    <span class="bg-green-100 text-green-800 p-1 rounded text-xs">–°–ï–ô–ß–ê–°</span>
                                    –¢–µ–∫—É—â–∞—è –õ–∏–Ω–µ–π–∫–∞
                                </h3>
                                <ul class="space-y-2">
                                    ${appData.businessContext.products.current.map(p => `
                                        <li class="flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-100">
                                            <span class="text-green-600">‚úî</span> ${p}
                                        </li>
                                    `).join('')}
                                </ul>
                                <div class="mt-4 p-4 bg-gray-50 rounded border border-gray-100">
                                    <div class="font-semibold text-sm text-gray-700">–ö–∞–Ω–∞–ª—ã –ø—Ä–æ–¥–∞–∂</div>
                                    <div class="text-gray-600 text-sm mt-1">üè™ ${appData.businessContext.channels.offline}</div>
                                    <div class="text-red-500 text-sm mt-1">‚ùå –ù–µ—Ç —Å–æ—Ü—Å–µ—Ç–µ–π</div>
                                </div>
                            </div>

                            <!-- Future State -->
                            <div>
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                                    <span class="bg-blue-100 text-blue-800 p-1 rounded text-xs">–ü–õ–ê–ù</span>
                                    –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
                                </h3>
                                <ul class="space-y-2">
                                    ${appData.businessContext.products.planned.map(p => `
                                        <li class="flex items-center gap-2 p-2 bg-blue-50 rounded border border-blue-100 border-dashed">
                                            <span class="text-blue-600">‚ûú</span> ${p}
                                        </li>
                                    `).join('')}
                                </ul>
                                <div class="mt-4 p-4 bg-blue-50 rounded border border-blue-100">
                                    <div class="font-semibold text-sm text-blue-900">–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Ü–µ–ª—å</div>
                                    <p class="text-blue-800 text-sm mt-1">–í—ã—Ö–æ–¥ –≤ –û–Ω–ª–∞–π–Ω (D2C, –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã) + –†–æ—Å—Ç –≤—ã—Ä—É—á–∫–∏ x3-x5.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSegments() {
            const content = document.getElementById('main-content');
            content.innerHTML = `
                <div class="space-y-6 animate-fade-in">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                        <h2 class="text-2xl font-bold mb-2 font-serif text-[#2D2A26]">–°–µ–≥–º–µ–Ω—Ç—ã –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –ü–æ–ª—è (R1)</h2>
                        <p class="text-gray-600">
                            –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å 5 –∫–ª—é—á–µ–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ñ–æ–∫—É—Å –∞–Ω–∞–ª–∏–∑–∞.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        ${appData.segments.map(seg => `
                            <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 card-hover cursor-pointer group" onclick="toggleSegmentDetail(${seg.id})">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="bg-[#F9F8F4] text-[#556B2F] font-bold w-8 h-8 flex items-center justify-center rounded-full text-sm">
                                        ${seg.id}
                                    </div>
                                    <span class="text-gray-300 group-hover:text-[#556B2F] transition-colors">‚ÑπÔ∏è</span>
                                </div>
                                <h3 class="font-bold text-lg mb-2 text-[#2D2A26]">${seg.title}</h3>
                                <p class="text-sm text-gray-500 mb-4">${seg.criteria}</p>
                                
                                <div id="seg-detail-${seg.id}" class="hidden border-t border-gray-100 pt-4 mt-2 bg-gray-50 p-2 rounded text-sm">
                                    <span class="font-semibold text-[#556B2F]">–û—Å–Ω–æ–≤–Ω–æ–π ¬´—Ä—ã—á–∞–≥¬ª:</span> <br/>
                                    ${seg.focus}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderProtocol() {
            const content = document.getElementById('main-content');
            content.innerHTML = `
                <div class="space-y-6 animate-fade-in">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                        <h2 class="text-2xl font-bold mb-2 font-serif text-[#2D2A26]">–ü—Ä–æ—Ç–æ–∫–æ–ª –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–ú–µ—Ç–æ–¥–∏–∫–∞)</h2>
                        <p class="text-gray-600">
                            –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. –ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –±–∞–∑—ã.
                        </p>
                    </div>

                    <div class="space-y-4">
                        ${appData.protocol.map((step, index) => `
                            <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                                <button class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors" onclick="toggleProtocol('${step.id}')">
                                    <div class="flex items-center gap-4">
                                        <div class="font-mono text-sm font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded">${step.id}</div>
                                        <div class="font-semibold text-[#2D2A26]">${step.title}</div>
                                    </div>
                                    <span class="text-gray-400">‚ñº</span>
                                </button>
                                <div id="proto-${step.id}" class="hidden p-4 bg-[#F9F8F4] border-t border-gray-100 text-sm text-gray-700">
                                    <p class="mb-2"><strong>–ó–∞–¥–∞—á–∞:</strong> ${step.desc}</p>
                                    <p><strong>–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:</strong> Markdown —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏ (—Å—Å—ã–ª–∫–∏, –¥–∞—Ç—ã).</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // --- INTERACTION LOGIC ---

        function switchTab(tabName) {
            // Update State
            currentTab = tabName;

            // Update UI styles
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('tab-inactive');
            });
            const activeBtn = document.getElementById(`nav-${tabName}`);
            if (activeBtn) {
                activeBtn.classList.remove('tab-inactive');
                activeBtn.classList.add('tab-active');
            }

            // Render Content
            if (tabName === 'dashboard') renderDashboard();
            if (tabName === 'context') renderContext();
            if (tabName === 'segments') renderSegments();
            if (tabName === 'protocol') renderProtocol();

            // Mobile menu handling
            const mobileMenu = document.querySelector('aside');
            if (window.innerWidth < 768) {
                mobileMenu.classList.add('hidden');
            }
        }

        function toggleMobileNav() {
            const nav = document.querySelector('aside');
            nav.classList.toggle('hidden');
        }

        function toggleSegmentDetail(id) {
            const el = document.getElementById(`seg-detail-${id}`);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
            } else {
                el.classList.add('hidden');
            }
        }

        function toggleProtocol(id) {
            const el = document.getElementById(`proto-${id}`);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
            } else {
                el.classList.add('hidden');
            }
        }

        // --- CHARTS ---

        function initRevenueChart() {
            const ctx = document.getElementById('revenueChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['–°–µ–π—á–∞—Å (–û—Ñ—Ñ–ª–∞–π–Ω)', '–¶–µ–ª—å (–ì–æ–¥)'],
                    datasets: [{
                        label: '–í—ã—Ä—É—á–∫–∞ (—Ç—ã—Å. ‚ÇΩ)',
                        data: [110, 500],
                        backgroundColor: ['#8F9779', '#556B2F'],
                        borderRadius: 6,
                        barThickness: 50
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '–¢—ã—Å. ‚ÇΩ' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + ' 000 ‚ÇΩ';
                                }
                            }
                        }
                    }
                }
            });
        }

        // --- INITIALIZATION ---
        window.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

    </script>
</body>
</html>